- [建立时间和保持时间](#建立时间和保持时间)
  - [时序的一些常用定义](#时序的一些常用定义)
  - [建立时间违约](#建立时间违约)
  - [保持时间违约](#保持时间违约)

# 建立时间和保持时间
## 时序的一些常用定义
+ 建立时间：$T_{su}$：set up time  
    是指在触发器的***时钟信号上升沿到来以前***，数据稳定不变的时间，如果建立时间不够，数据将不能在这个时钟上升沿被稳定的打入触发器，Tsu就是指这个最小的稳定时间。  
    

+ 保持时间 $T_h$：hold time   
    是指在触发器的***时钟信号上升沿到来以后***，数据稳定不变的时间，如果保持时间不够，数据同样不能被稳定的打入触发器，Th就是指这个最小的保持时间。


+ 输出响应时间 $T_{co}$: Clock Pad to Output Pad  
    触发器输出的响应时间，也就是***触发器的输出在clk时钟上升沿到来之后多长的时间内发生变化***，也即触发器的输出延时。

+ 组合逻辑电路的传输延时 $T_{comb}$ 
    组合逻辑部分延迟，包括走线的延迟。

+ 亚稳态  
    这也是一个异步电路同步化的问题。亚稳态是指触发器无法在某个规定的时间段内到达一个可以确认的状态。使用两级触发器来使异步电路同步化的电路其实叫做“一位同步器”，他只能用来对一位异步信号进行同步。两级触发器可防止亚稳态传播的原理：假 设第一级触发器的输入不满足其建立保持时间，它在第一个脉冲沿到来后输出的数据就为亚稳态，那么在下一个脉冲沿到来之前，其输出的亚稳态数据在一段恢复时 间后必须稳定下来，而且稳定的数据必须满足第二级触发器的建立时间，如果都满足了，在下一个脉冲沿到来时，第二级触发器将不会出现亚稳态，因为其输入端的 数据满足其建立保持时间。同步器有效的条件：第一级触发器进入亚稳态后的恢复时间 + 第二级触发器的建立时间 < = 时钟周期。
----
## 建立时间违约

主要是指的是寄存器中间的电路太慢，导致下一个时钟周期到来的时候信号稳定的时间已经不够建立时间了。具体的计算为：   
$T_{clk}>T_{comb} + T_{co} + T_{su}$   或者   $T_{clk} - T_{comb-max} - T_{co-max} >T_{su}$  

    

## 保持时间违约
保持时间违约，两级寄存器中间的变化速度太快，在时钟上升沿到来后，前一级的信号迅速变化进入不稳定状态，无法满足保持时间的要求。具体的计算为：  
$T_{co} + T_{comb} > T_h$

---

+ 时钟偏斜 clock skew  
    时钟偏斜（偏移）是因为布线长度和负载不同，导致同一时钟上升沿到不同触发器的时间不同。这一时间差，即为时钟偏移。常见偏移为正：用人类的话来说，下一个时钟沿由于布线的原因，来的慢了，其延时为$t_d$。
    
    对于建立时间的影响：  
    $T_{clk} + t_d - T_{comb-max} - T_{co-max} >T_{su}$  
    
    
    对于保持时间的影响:  
    $T_{co} + T_{comb} > T_h + t_d$ 


    + 解决方案1：在数据路径上加入延迟
    + 解决方案2：在前一级的寄存器时钟加上延迟
    + 解决方案3：交替使用时钟沿，提供半个时钟周期的时钟偏移余量
    + 解决方案4：使用不同相位的时钟进行驱动



+ 时钟抖动 clock Jitter
    时钟抖动是指同一时钟，相邻周期间时间不一致的现象。这一误差来源于时钟自身（如：晶振、PLL电路的偏差），与噪声、干扰以及电源变化有关。（抖动还可能出现在同一周期间，表现为占空比的改变，称为半周期抖动），综上：可以认为时钟抖动是时钟信号本身在传输过程中的一些偶然和不定的变化之总和。

